<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aastha's Birthday</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
    rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

  <!-- ‚úÖ Inline additions for Game + Card Pull Animation + Loading -->
  <style>
    /* ===== Fun Suspense Overlay ===== */
    .suspenseOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      pointer-events: none;
      transition: 0.35s ease;
      backdrop-filter: blur(6px);
      font-family: 'Poppins', sans-serif;
    }

    .suspenseOverlay.active {
      opacity: 1;
      pointer-events: auto;
    }

    .suspenseCard {
      width: min(520px, 92vw);
      background: rgba(255, 255, 255, 0.14);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 18px;
      padding: 26px 22px;
      color: #fff;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
      transform: translateY(12px) scale(0.98);
      transition: 0.35s ease;
    }

    .suspenseOverlay.active .suspenseCard {
      transform: translateY(0) scale(1);
    }

    .lockIcon {
      font-size: 34px;
      margin-bottom: 10px;
      animation: lockPulse 1.3s infinite ease-in-out;
    }

    @keyframes lockPulse {
      0%, 100% { transform: scale(1); opacity: 0.85; }
      50% { transform: scale(1.12); opacity: 1; }
    }

    .progressWrap {
      height: 12px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 999px;
      overflow: hidden;
      margin: 16px 0 10px;
    }

    .progressBar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ff5ea8, #ffd36e, #7cf1ff);
      border-radius: 999px;
      transition: width 0.12s linear;
    }

    .tinyHint { font-size: 13px; opacity: 0.9; }

    /* ===== Toast Notifications ===== */
    .toastWrap {
      position: fixed;
      right: 18px;
      bottom: 18px;
      z-index: 9998;
      display: flex;
      flex-direction: column;
      gap: 10px;
      font-family: 'Poppins', sans-serif;
    }

    .toast {
      background: rgba(0, 0, 0, 0.68);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 10px 12px;
      border-radius: 12px;
      width: min(320px, 86vw);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
      animation: toastIn 0.4s ease;
    }

    @keyframes toastIn {
      from { transform: translateX(18px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .toast .small { opacity: 0.85; font-size: 12px; }

    /* ===== Secret Modal (Game) ===== */
    .secretModal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      pointer-events: none;
      transition: 0.35s ease;
      backdrop-filter: blur(7px);
      font-family: 'Poppins', sans-serif;
    }

    .secretModal.active { opacity: 1; pointer-events: auto; }

    .secretBox {
      width: min(620px, 92vw);
      background: #fff;
      border-radius: 18px;
      padding: 22px;
      position: relative;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
      transform: scale(0.96);
      transition: 0.35s ease;
    }

    .secretModal.active .secretBox { transform: scale(1); }

    .secretClose {
      position: absolute;
      top: 10px;
      right: 10px;
      border: none;
      background: rgba(0, 0, 0, 0.06);
      border-radius: 10px;
      padding: 8px 10px;
      cursor: pointer;
    }

    .secretFooter { margin-top: 10px; font-size: 12px; opacity: 0.75; }

    /* ===== Pick a Gift Game ===== */
    .gameSub { margin-top: 6px; opacity: 0.85; font-size: 14px; }

    .giftGrid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-top: 14px;
    }

    .giftCard {
      border: none;
      cursor: pointer;
      background: #fff;
      border-radius: 16px;
      padding: 12px 10px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
      transition: transform 0.18s ease, box-shadow 0.18s ease, opacity 0.18s ease;
      position: relative;
      overflow: hidden;
    }

    .giftCard:hover {
      transform: translateY(-4px);
      box-shadow: 0 14px 32px rgba(0, 0, 0, 0.18);
    }

    .giftTop { font-size: 18px; opacity: 0.9; }
    .giftBox { font-size: 44px; margin: 6px 0 4px; }
    .giftTag { font-weight: 700; font-size: 13px; opacity: 0.8; }

    .giftCard.disabled { pointer-events: none; opacity: 0.7; }
    .giftCard.picked { outline: 3px solid rgba(255, 94, 168, 0.35); transform: translateY(-6px) scale(1.01); }

    .revealBox {
      margin-top: 14px;
      display: none;
      background: rgba(0, 0, 0, 0.04);
      border-radius: 16px;
      padding: 14px;
    }

    .revealBox.active { display: block; animation: popIn 0.25s ease; }
    @keyframes popIn { from { transform: scale(0.98); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    .revealTitle { font-size: 18px; font-weight: 800; margin-bottom: 6px; }
    .revealText { font-size: 14px; opacity: 0.88; line-height: 1.35; }

    .gameActions { display: flex; gap: 10px; justify-content: center; margin-top: 12px; flex-wrap: wrap; }
    .playAgain, .closeGame { border: none; border-radius: 12px; padding: 10px 14px; cursor: pointer; font-weight: 800; }
    .playAgain { background: #111; color: #fff; }
    .closeGame { background: rgba(0, 0, 0, 0.08); }

    @media (max-width:520px) { .giftGrid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }

    /* ===== Gift 6 Pull-Card Animation ===== */
    .pullCardOverlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.55);
      z-index: 10000;
      opacity: 0;
      pointer-events: none;
      transition: 0.25s ease;
      backdrop-filter: blur(6px);
      font-family: 'Poppins', sans-serif;
    }

    .pullCardOverlay.active { opacity: 1; pointer-events: auto; }

    .pullCardStage {
      width: min(420px, 92vw);
      text-align: center;
      transform: translateY(10px) scale(0.98);
      transition: 0.25s ease;
    }

    .pullCardOverlay.active .pullCardStage { transform: translateY(0) scale(1); }

    .giftBoxAnim {
      position: relative;
      width: 220px;
      height: 220px;
      margin: 0 auto;
      display: grid;
      place-items: center;
      filter: drop-shadow(0 18px 40px rgba(0, 0, 0, 0.35));
    }

    .giftBase {
      font-size: 110px;
      line-height: 1;
      transform: translateY(12px);
    }

    .giftLid {
      position: absolute;
      top: 28px;
      font-size: 64px;
      line-height: 1;
      transform-origin: center;
      opacity: 0.95;
    }

    .popCard {
      position: absolute;
      bottom: 70px;
      width: 150px;
      height: 110px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.98);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.25);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transform: translateY(70px) scale(0.88);
      opacity: 0;
    }

    .popCardTop { font-size: 28px; margin-bottom: 6px; }

    .popCardText {
      font-size: 13px;
      opacity: 0.85;
      line-height: 1.2;
    }

    .spark { position: absolute; font-size: 18px; opacity: 0; }
    .s1 { left: 10px; top: 40px; }
    .s2 { right: 12px; top: 48px; }
    .s3 { left: 22px; bottom: 64px; }
    .s4 { right: 20px; bottom: 70px; }

    .pullHint { margin-top: 14px; color: #fff; font-weight: 700; opacity: 0.92; }

    .pullCardOverlay.active .giftLid { animation: lidWiggle 1.2s ease forwards; }
    .pullCardOverlay.active .popCard { animation: cardPop 1.2s 0.25s cubic-bezier(.2, .9, .2, 1) forwards; }
    .pullCardOverlay.active .spark { animation: sparkle 0.9s 0.35s ease forwards; }
    .pullCardOverlay.active .giftBase { animation: baseBounce 1.1s ease forwards; }

    @keyframes lidWiggle {
      0% { transform: translateY(0) rotate(0deg) scale(1); }
      20% { transform: translateY(-6px) rotate(-10deg) scale(1.05); }
      45% { transform: translateY(-10px) rotate(8deg) scale(1.07); }
      70% { transform: translateY(-6px) rotate(-6deg) scale(1.03); }
      100% { transform: translateY(-4px) rotate(0deg) scale(1); }
    }

    @keyframes cardPop {
      0% { opacity: 0; transform: translateY(70px) scale(0.88); }
      55% { opacity: 1; transform: translateY(-18px) scale(1.04); }
      75% { opacity: 1; transform: translateY(-6px) scale(0.98); }
      100% { opacity: 1; transform: translateY(-10px) scale(1); }
    }

    @keyframes sparkle {
      0% { opacity: 0; transform: scale(0.7); }
      50% { opacity: 1; transform: scale(1.15); }
      100% { opacity: 0; transform: scale(0.9); }
    }

    @keyframes baseBounce {
      0% { transform: translateY(12px) scale(1); }
      40% { transform: translateY(16px) scale(1.03); }
      70% { transform: translateY(10px) scale(0.98); }
      100% { transform: translateY(12px) scale(1); }
    }
  </style>
</head>

<body>
  <div id="wrapper">
    <div class="flag__birthday">
      <img src="./images/1.png" alt="" width="350" class="flag__left">
      <img src="./images/1.png" alt="" width="350" class="flag__right">
    </div>

    <div class="content">
      <div class="left">
        <div class="title">
          <h1 class="happy">
            <span style="--t: 4s;">H</span>
            <span style="--t: 4.2s;">a</span>
            <span style="--t: 4.4s;">p</span>
            <span style="--t: 4.6s;">p</span>
            <span style="--t: 4.8s;">y</span>
          </h1>
          <h1 class="birthday">
            <span style="--t: 5s;">B</span>
            <span style="--t: 5.2s;">i</span>
            <span style="--t: 5.4s;">r</span>
            <span style="--t: 5.6s;">t</span>
            <span style="--t: 5.8s;">h</span>
            <span style="--t: 6s;">d</span>
            <span style="--t: 6.2s;">a</span>
            <span style="--t: 6.4s;">y</span>
          </h1>
          <div class="hat">
            <img src="./images/hat.png" alt="" width="130">
          </div>
        </div>

        <div class="date__of__birth">
          <span></span>
        </div>

        <div class="btn">
          <button id="btn__letter" type="button">
            <div class="mail">
              Click Here AASTHA
              <i class="fa-regular fa-envelope"></i>
            </div>
          </button>
        </div>
      </div>

      <div class="right">
        <div class="box__account">
          <div class="image">
            <img src="./images/unnamed.png" alt="">
          </div>
          <div class="name">
            <i class="fa-solid fa-heart"></i>
            <span>Dear Aastha</span>
            <i class="fa-solid fa-heart"></i>
          </div>
          <div class="balloon_one">
            <img width="100px" src="./images/balloon1.png" alt="">
          </div>
          <div class="balloon_two">
            <img width="100px" src="./images/balloon2.png" alt="">
          </div>
        </div>

        <div class="cricle">
          <div class="text__cricle">
            <span style="--i: 1;">h</span>
            <span style="--i: 2;">a</span>
            <span style="--i: 3;">p</span>
            <span style="--i: 4;">p</span>
            <span style="--i: 5;">y</span>
            <span style="--i: 6;">-</span>
            <span style="--i: 7;">b</span>
            <span style="--i: 8;">i</span>
            <span style="--i: 9;">r</span>
            <span style="--i: 10;">t</span>
            <span style="--i: 11;">h</span>
            <span style="--i: 12;">d</span>
            <span style="--i: 13;">a</span>
            <span style="--i: 14;">y</span>
            <span style="--i: 15;">-</span>
          </div>
          <i class="fa-solid fa-heart"></i>
        </div>
      </div>
    </div>

    <div class="decorate_star star1" style="--t: 15s;"></div>
    <div class="decorate_star star2" style="--t: 15.2s;"></div>
    <div class="decorate_star star3" style="--t: 15.4s;"></div>
    <div class="decorate_star star4" style="--t: 15.6s;"></div>
    <div class="decorate_star star5" style="--t: 15.8s;"></div>

    <div class="decorate_flower--one" style="--t: 15s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_flower--two" style="--t: 15.3s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_flower--three" style="--t: 15.6s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>

    <div class="decorate_bottom">
      <img src="./images/decorate.png" alt="" width="100">
    </div>
    <div class="smiley__icon">
      <img src="./images/smiley_icon.png" alt="" width="100">
    </div>

    <!-- ‚úÖ CARD (boxMail) - stays hidden until Gift 6 is picked -->
    <div class="boxMail">
      <i class="fa-solid fa-xmark" id="closeMail"></i>
      <div class="boxMail-container">
        <div class="card1">
          <div class="userImg">
            <img src="images/unnamed.png" alt="">
          </div>
          <h4 class="username">To:AASTHA<span class="underline"></span></h4>
          <h3>Happy Birthday</h3>
          <div class="imageCute">
            <img src="cute1.png" alt="">
          </div>
        </div>

        <div class="card2">
          <div class="card2-content">
            <h3>To You!</h3>
            <h2>Happy birthday</h2>
            <div class="imageCute2">
              <img src="cute2.png" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚úÖ Gift 6 ‚ÄúPull Card Out of Gift‚Äù Animation Overlay -->
    <div class="pullCardOverlay" id="pullCardOverlay" aria-hidden="true">
      <div class="pullCardStage">
        <div class="giftBoxAnim" id="giftBoxAnim">
          <div class="giftLid">üéÄ</div>
          <div class="giftBase">üéÅ</div>

          <div class="popCard" id="popCard">
            <div class="popCardTop">üíå</div>
            <div class="popCardText">
              <b>Secret Card!</b><br />
              for Aastha ‚ú®
            </div>
          </div>

          <span class="spark s1">‚ú®</span>
          <span class="spark s2">‚ú®</span>
          <span class="spark s3">‚ú®</span>
          <span class="spark s4">‚ú®</span>
        </div>

        <div class="pullHint">Card nikal raha hai‚Ä¶ wait üòÑ</div>
      </div>
    </div>

    <!-- ‚úÖ FUN LOADING (runs AFTER card close) -->
    <div class="suspenseOverlay" id="suspenseOverlay">
      <div class="suspenseCard">
        <div class="lockIcon"><i class="fa-solid fa-gift"></i></div>
        <h2 id="suspenseTitle">Secret loading‚Ä¶</h2>
        <p id="suspenseSub">Card close ke baad chalega üòÑ</p>

        <div class="progressWrap">
          <div class="progressBar" id="progressBar"></div>
        </div>

        <div class="tinyHint" id="tinyHint">Tip: Click anywhere to speed up ‚ö°</div>
      </div>
    </div>

    <!-- ‚úÖ TOASTS -->
    <div class="toastWrap" id="toastWrap"></div>

    <!-- ‚úÖ PICK A GIFT GAME -->
    <div class="secretModal" id="secretModal">
      <div class="secretBox">
        <button class="secretClose" id="secretClose" type="button"><i class="fa-solid fa-xmark"></i></button>

        <h2>üéÅ Pick a Gift!</h2>
        <p class="gameSub">6 gifts me se ek choose karo‚Ä¶ ek me card chhupa hai üòÑ</p>

        <div class="giftGrid" id="giftGrid">
          <button class="giftCard" data-gift="0" type="button">
            <div class="giftTop">üéÄ</div>
            <div class="giftBox">üéÅ</div>
            <div class="giftTag">Gift 1</div>
          </button>

          <button class="giftCard" data-gift="1" type="button">
            <div class="giftTop">üéÄ</div>
            <div class="giftBox">üéÅ</div>
            <div class="giftTag">Gift 2</div>
          </button>

          <button class="giftCard" data-gift="2" type="button">
            <div class="giftTop">üéÄ</div>
            <div class="giftBox">üéÅ</div>
            <div class="giftTag">Gift 3</div>
          </button>

          <button class="giftCard" data-gift="3" type="button">
            <div class="giftTop">üéÄ</div>
            <div class="giftBox">üéÅ</div>
            <div class="giftTag">Gift 4</div>
          </button>

          <button class="giftCard" data-gift="4" type="button">
            <div class="giftTop">üéÄ</div>
            <div class="giftBox">üéÅ</div>
            <div class="giftTag">Gift 5</div>
          </button>

          <!-- ‚úÖ Gift 6 = contains the card -->
          <button class="giftCard" data-gift="5" type="button">
            <div class="giftTop">üéÄ</div>
            <div class="giftBox">üéÅ</div>
            <div class="giftTag">Gift 6</div>
          </button>
        </div>

        <div class="revealBox" id="revealBox">
          <div class="revealTitle" id="revealTitle">üéâ Surprise!</div>
          <div class="revealText" id="revealText"></div>

          <div class="gameActions">
            <button class="playAgain" id="playAgain" type="button">Play Again üîÅ</button>
            <button class="closeGame" id="closeGame" type="button">Close ‚ú®</button>
          </div>
        </div>

        <div class="secretFooter">Hint: Card waala gift‚Ä¶ thoda ‚Äúspecial‚Äù hai üò≠üòÇ</div>
      </div>
    </div>

  </div>

  <script>
    // ===== Date typing (kept) =====
    let datetxt = "05 February";
    let charArrDate = datetxt.split('');
    let currentIndex = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");

    setTimeout(function () {
      let timeDatetxt = setInterval(function () {
        if (currentIndex < charArrDate.length) {
          date__of__birth.textContent += charArrDate[currentIndex];
          currentIndex++;
        } else {
          let i = document.createElement("i");
          i.className = "fa-solid fa-star";
          document.querySelector(".date__of__birth").prepend(i);
          document.querySelector(".date__of__birth").appendChild(i.cloneNode(true));
          clearInterval(timeDatetxt);
        }
      }, 100);
    }, 12000);

    // ===== TOASTS =====
    function showToast(msg, small = "") {
      const wrap = document.getElementById("toastWrap");
      const t = document.createElement("div");
      t.className = "toast";
      t.innerHTML = `<div>${msg}</div>${small ? `<div class="small">${small}</div>` : ""}`;
      wrap.appendChild(t);
      setTimeout(() => { t.style.opacity = "0"; t.style.transform = "translateX(18px)"; }, 2600);
      setTimeout(() => { t.remove(); }, 3200);
    }

    // ===== Elements =====
    const suspenseOverlay = document.getElementById("suspenseOverlay");
    const progressBar = document.getElementById("progressBar");
    const suspenseTitle = document.getElementById("suspenseTitle");
    const suspenseSub = document.getElementById("suspenseSub");

    const secretModal = document.getElementById("secretModal");
    const secretClose = document.getElementById("secretClose");

    const giftGrid = document.getElementById("giftGrid");
    const revealBox = document.getElementById("revealBox");
    const revealTitle = document.getElementById("revealTitle");
    const revealText = document.getElementById("revealText");
    const playAgainBtn = document.getElementById("playAgain");
    const closeGameBtn = document.getElementById("closeGame");

    const boxmail = document.querySelector('.boxMail');
    const closeMail = document.getElementById("closeMail");

    const pullCardOverlay = document.getElementById("pullCardOverlay");

    // ‚úÖ Winner FIXED = 6th gift (index 5)
    const winnerIndex = 5;

    function playPullCardAnimation(done) {
      if (!pullCardOverlay) {
        done?.();
        return;
      }
      pullCardOverlay.classList.add("active");
      setTimeout(() => {
        pullCardOverlay.classList.remove("active");
        done?.();
      }, 1500);
    }

    // ===== Loading AFTER card close =====
    function runLoadingAfterCardClose() {
      suspenseOverlay.classList.add("active");

      let p = 0;
      let speed = 1.4;

      suspenseTitle.textContent = "Secret lock re-checking‚Ä¶ üîêüòÑ";
      suspenseSub.textContent = "Card closed‚Ä¶ now final surprise loading ‚ú®";
      progressBar.style.width = "0%";

      const stages = [
        { at: 20, t: "Counting smiles‚Ä¶ üòÑ", s: "Smile count: unlimited ‚ôæÔ∏è" },
        { at: 45, t: "Packing extra hugs‚Ä¶ ü§ó", s: "Bubble wrap: love edition üíõ" },
        { at: 70, t: "Almost done‚Ä¶ üéâ", s: "Do not refresh‚Ä¶ cake will get offended üò≠" },
        { at: 92, t: "Final unlock‚Ä¶ ‚úÖ", s: "Happy Birthday mode ON ‚ú®" }
      ];

      const timer = setInterval(() => {
        p += speed + Math.random() * 1.2;
        if (p > 100) p = 100;
        progressBar.style.width = p + "%";

        stages.forEach(st => {
          if (p >= st.at) {
            suspenseTitle.textContent = st.t;
            suspenseSub.textContent = st.s;
          }
        });

        if (p >= 100) {
          clearInterval(timer);
          setTimeout(() => {
            suspenseOverlay.classList.remove("active");
            showToast("üéâ Final Surprise Unlocked!", "Happy Birthday Aastha üíõ‚ú®");
            secretModal.classList.remove("active");
          }, 450);
        }
      }, 120);

      suspenseOverlay.onclick = () => { speed += 2.2; };
    }

    // ===== Secret modal close =====
    secretClose?.addEventListener("click", () => secretModal.classList.remove("active"));
    secretModal?.addEventListener("click", (e) => {
      if (e.target === secretModal) secretModal.classList.remove("active");
    });

    // ===== Game helpers =====
    function resetGame() {
      revealBox.classList.remove("active");
      revealTitle.textContent = "üéâ Surprise!";
      revealText.textContent = "";

      document.querySelectorAll(".giftCard").forEach(btn => {
        btn.classList.remove("picked", "disabled");
        btn.disabled = false;
      });

      const labels = ["Gift 1", "Gift 2", "Gift 3", "Gift 4", "Gift 5", "Gift 6"];
      labels.sort(() => Math.random() - 0.5);
      document.querySelectorAll(".giftCard .giftTag").forEach((tag, i) => tag.textContent = labels[i]);
    }

    function openGame() {
      secretModal.classList.add("active");
      resetGame();
      showToast("üéÆ Pick a Gift!", "Card sirf Gift 6 me hai üòÑ");
    }

    // ‚úÖ Button click => open game directly
    document.getElementById("btn__letter")?.addEventListener("click", () => {
      showToast("üéÅ Mission:", "Gift choose karo‚Ä¶ ek me card chhupa hai üòÑ");
      openGame();
    });

    playAgainBtn?.addEventListener("click", () => {
      resetGame();
      showToast("üîÅ New try!", "Hint: Gift 6 ko ignore mat karna üò≠üòÇ");
    });

    closeGameBtn?.addEventListener("click", () => {
      secretModal.classList.remove("active");
    });

    // Gift click
    giftGrid?.addEventListener("click", (e) => {
      const btn = e.target.closest(".giftCard");
      if (!btn) return;

      const idx = Number(btn.getAttribute("data-gift"));

      // lock all
      document.querySelectorAll(".giftCard").forEach(b => {
        b.classList.add("disabled");
        b.disabled = true;
      });
      btn.classList.add("picked");

      const funny = [
        "üòÇ You got‚Ä¶ ‚ÄòOne Free Compliment‚Äô coupon! (Redeem anytime).",
        "üçü Fries unlocked‚Ä¶ but only in imagination üò≠",
        "üß∏ Teddy is sleeping‚Ä¶ try later üò¥",
        "üéµ Song loading‚Ä¶ ‚Äòla la la‚Äô (speaker not included üòÇ)",
        "üç∞ Cake unlocked‚Ä¶ please don‚Äôt eat the screen ü§£"
      ];

      revealBox.classList.add("active");

      // ‚úÖ Gift 6 => play pull-card animation => open card
      if (idx === winnerIndex) {
        revealTitle.textContent = "üéâ You found the SECRET CARD!";
        revealText.textContent = "üíå Gift 6 ke andar card chhupa tha‚Ä¶ nikal raha hai üòÑ‚ú®";

        playPullCardAnimation(() => {
          boxmail.classList.add("active");
        });

      } else {
        revealTitle.textContent = "üòÇ Oops! Funny gift unlocked!";
        revealText.textContent = funny[Math.floor(Math.random() * funny.length)] + " (Play Again üîÅ)";
      }
    });

    // ‚úÖ Card close => then loading starts
    closeMail?.addEventListener("click", function () {
      boxmail.classList.remove("active");
      setTimeout(() => runLoadingAfterCardClose(), 300);
    });

    // Optional hints
    setTimeout(() => showToast("‚ú® Hint:", "Start button dabao üòÑ"), 6000);
    setTimeout(() => showToast("üéÅ Hint 2:", "Gift 6‚Ä¶ suspiciously quiet üò≠üòÇ"), 10500);
  </script>

</body>

</html>
